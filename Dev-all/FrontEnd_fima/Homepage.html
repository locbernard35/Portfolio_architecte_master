<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<link rel="icon" type="image/x-icon" href="./favicon.ico">	
		<title>Sophie Bluel - Architecte d'intérieur</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Work+Sans&display=swap" rel="stylesheet">
		<meta name="description" content="">
		<link rel="stylesheet" href="./assets/style.css">
	</head>
	<body class="body">
		<div class="main-container">
			<header><!--flex-->
				<h1>Sophie Bluel <span>Architecte d'intérieur</span></h1><!--flex-->
				<nav>
					<ul>
						<li><a class="menu-text"  href="http://localhost/FrontEnd_fima/Homepage.html#projets">projets</a></li>
						<li><a class="menu-text"  href="http://localhost/FrontEnd_fima/Homepage.html#contact">contact</a></li>
						<li id="menu-text3"><a class="menu-text3" href="http://localhost/login/">login</a></li>
						<li><img class="menu-icon"src="./assets/icons/instagram.png" alt="Instagram"></li>
					</ul>
				</nav>
			</header>
			<main>
				<section id="introduction">
					<figure>
						<img src="./assets/images/sophie-bluel.png" alt="">
					</figure>
					<article>
						<h2>Designer d'espace</h2>
						<p>Je raconte votre histoire, je valorise vos idées. Je vous accompagne de la conception à la livraison finale du chantier.</p>
						<p>Chaque projet sera étudié en commun, de façon à mettre en valeur les volumes, les matières et les couleurs dans le respect de l’esprit des lieux et le choix adapté des matériaux. Le suivi du chantier sera assuré dans le souci du détail, le respect du planning et du budget.</p>
						<p>En cas de besoin, une équipe pluridisciplinaire peut-être constituée : architecte DPLG, décorateur(trice)</p>
					</article>
				</section>
				<section id="portfolio">
					<h2 id="projets">Mes Projets</h2>
					
					<div class="container_filter"><!--flex-->
						<div id="bt-filter-1" class="filter_e1 js-background-color-vert"><span class="filter_e1_text js-color-blanc">Tous</span></div>
					    <div id="bt-filter-2" class="filter_e1"><span class="filter_e1_text">objets</span></div>
					    <div id="bt-filter-3" class="filter_e1"><span class="filter_e1_text">Appartements</span></div>
					    <div id="bt-filter-4" class="filter_e1"><span class="filter_e1_text">Hôtels & restaurants</span></div>					
					</div>
					
					<div id="gallery" class="gallery">					
                       
					</div>
				</section>	
				<section id="contact">
					<h2>Contact</h2>
					<p>Vous avez un projet ? Discutons-en !</p>
					<form action="#" method="post">
						<label for="name">Nom</label>
						<input type="text" name="name" id="name">
						<label for="email">Email</label>
						<input type="email" name="email" id="email">
						<label for="message">Message</label>
						<textarea name="message" id="message" cols="30" rows="10"></textarea>
						<input type="submit" value="Envoyer">
					</form>
				</section>	
			</main>
		</div>
		<footer>
			<nav>
				<ul>
					<li class="footer-text-1">Mentions Légales</li>
				</ul>
			</nav>
		</footer>
		
		
<script type="module">
/*Dev loc bernard Meca:

Pages dynamiques :

Récuperation Bd_json Api
Reset contenu elem  noeud Dom
Recuperation donnéé json
Http beginning ->Création noeud Dom
Filtre: even   ->Trie donnée json  ->Reset contenu->Création  new noeud Dom 

*/

//------------------------------------------------------Connection admin:
	//récup Token dans Stockage local
	const token= window.localStorage.getItem("token");	
	const logout = "null";	
	const elem_7 = document.querySelector('#menu-text3');
	

     //Si Token exist
	if(token== null){
		console.log("Déconnecté");
	}else{	
        console.log("connecté");
				
		//modif Dom	
        console.log(elem_7.innerHTML="");//remove		
		elem_7.innerHTML='<span class="menu-text3">logout</span>';//Add
	
		}

	
	elem_7.addEventListener("click", function() {
		console.log("click->logout");
		
		//remove:Token dans Stockage local
		window.localStorage.removeItem("token");
		
		console.log(elem_7.innerHTML="");//remove
		elem_7.innerHTML='<a class="menu-text3" href="http://localhost/login/">login</a>';//Add
     });



//------------------------------------------------------Connection admin:



//Récuperation Bd_json Api:
	const st0       =   await fetch("http://localhost:5678/api/works");	
	let bd_json     =   await st0.json();//Corp ->http
    let numbreElem  =   bd_json.length;


	no_filtre();//Call>


//Getters:
	const   parm              = "debug";
	const   parm1             = "Objets";
	const   parm2             = "Appartements";
	const   parm3             = "Hotels & restaurants";
	
	const  	elem_1            = document.querySelector('#bt-filter-1');
	const  	elem_2            = document.querySelector('#bt-filter-2');
    const  	elem_3            = document.querySelector('#bt-filter-3');
	const  	elem_4            = document.querySelector('#bt-filter-4');
   
    const  	elem_5            = document.querySelectorAll('.filter_e1');     
    const 	elem_6            = document.querySelectorAll('.filter_e1_text');
	const 	elem_5_lists      = elem_5.length; 
 
//Even-all:

	elem_1.addEventListener('click', (event) => click_0(event)); 
	elem_2.addEventListener('click', (event) => click_1(event, parm1));
	elem_3.addEventListener('click', (event) => click_2(event, parm2)); 
	elem_4.addEventListener('click', (event) => click_3(event, parm3));
	
//Setters:    
	function click_0(event){//even: funct
	   console.log("Click->Bouton->Tous");	
	   
       update_class(elem_1);
	   no_filtre();
	}

	function click_1(event, parm1){	  
	 console.log("Click->Bouton->Objets");	
	 
	 update_class(elem_2);	 	 
	 remove_gallery(); 	
	 
	 let    mots = parm1;
	 
	 Tri_bd_json(numbreElem,mots);
	}

	function click_2(event, parm2){	
     console.log("Click->Bouton->Appartements");
	 
	 update_class(elem_3);
	 
	 remove_gallery();   
	 let    mots = parm2;
	 
	 Tri_bd_json(numbreElem,mots);
	}

	function click_3(event, parm3){	
     console.log("Click->Bouton->Appartements");
	 
	 update_class(elem_4);	 
	 remove_gallery();   
	 let    mots = parm3;	 
	 Tri_bd_json(numbreElem,mots);
	}



	function update_class(elem){//Remove class ,Add class (x)
	 
		//remove class: 
		for (let i = 0; i < elem_5_lists; i = i + 1) {
		
			//console.log(i);  		
			elem_5[i].className="filter_e1";     //background-color
			elem_6[i].className="filter_e1_text";//color		
		}
	 
	 
	        
		//add:
		 elem.className="filter_e1 js-background-color-vert";         //add class background-color
		 elem.childNodes[0].className="filter_e1_text js-color-blanc";//add class color
		}

	function Tri_bd_json(numbreElem,mots){//Parcourir Tout Tableaux retourn Cle
    
		
		for (let i = 0; i < numbreElem; i = i + 1) {//Boucle*11 etc ...
	
	    //Condition: Catégory name =>bd_json
		let st1 = bd_json[i].category.name;//TAB[] -All
		
	
		
		if( mots == st1){//Dyn
			//console.log("Trouvé: True-->" + i);			
			//console.log(bd_json[i]);	//resul=> True Bd Json	
			/*console.log(bd_json[i].id);*/console.log("Index:" + bd_json[i].id);			 
	        //console.log(bd_json[i].title);
			//console.log(bd_json[i].categoryId);
			//console.log(bd_json[i].userId);
			//console.log(bd_json[i].category.id);
			//console.log(bd_json[i].category.name);
			  
			  let index = i;
			 //call>
			 Creat_Block(index); 
			 
						           }
    
        
		                                       }
	}

    function no_filtre(){//Http beginning
		
		
	    remove_gallery(); 	 

		let n = bd_json.length;
		
		for (let i = 0; i < n; i = i + 1) {
		
		console.log("Index:" + i);  
		
		Creat_Block(i);//call> 
		}
	
	}
	
	function Creat_Block(index){//Création :1 Blocks de Noeuds DOM !


	var parent1    = document.querySelector("#gallery");
	var figure     = document.createElement("figure");
	var img        = document.createElement("img");
	var figcaption = document.createElement("figcaption");

	//Add Dom apendChild() dans elem parent dom
	parent1.appendChild(figure);
	figure.appendChild(img);
	figure.appendChild(figcaption);

	//Add attribut elem =>dyn
	figure.id = index;
	img.id    = index;
	img.src   = bd_json[index].imageUrl;
	img.alt   = bd_json[index].title;

	//Add contenant
	figcaption.innerHTML = bd_json[index].title;

	}

	function remove_gallery(){//reset contenu id="gallery"	
	
		const  e   = document.querySelector('#gallery');	
		e.innerHTML="";
	
	}

</script>		
		
	</body>
</html>
